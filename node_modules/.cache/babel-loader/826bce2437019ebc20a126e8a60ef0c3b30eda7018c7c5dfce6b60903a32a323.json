{"ast":null,"code":"var _s = $RefreshSig$();\nimport React, { useCallback } from \"react\";\nexport const useFormWithValidation = function () {\n  _s();\n  let v = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const [values, setValues] = React.useState(v);\n  const [errors, setErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(false);\n  const validateEmail = email => {\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(String(email).toLowerCase());\n  };\n  const handleChange = event => {\n    const target = event.target;\n    const name = target.name;\n    const value = target.value;\n    setValues({\n      ...values,\n      [name]: value\n    });\n    if (target.type === \"email\") {\n      const check = validateEmail(value);\n      setErrors({\n        ...errors,\n        [name]: !check ? \"Некорректный email\" : \"\"\n      });\n      setIsValid(check && target.closest(\"form\").checkValidity());\n    } else {\n      setErrors({\n        ...errors,\n        [name]: target.validationMessage\n      });\n      setIsValid(target.closest(\"form\").checkValidity());\n    }\n  };\n  const resetForm = useCallback(function () {\n    let newValues = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    let newErrors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let newIsValid = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    setValues(newValues);\n    setErrors(newErrors);\n    setIsValid(newIsValid);\n  }, [setValues, setErrors, setIsValid]);\n  return {\n    values,\n    handleChange,\n    errors,\n    isValid,\n    resetForm\n  };\n};\n_s(useFormWithValidation, \"l0Kv+UvdrOVB/vYcJ0DYltF4ZKY=\");","map":{"version":3,"names":["React","useCallback","useFormWithValidation","_s","v","arguments","length","undefined","values","setValues","useState","errors","setErrors","isValid","setIsValid","validateEmail","email","re","test","String","toLowerCase","handleChange","event","target","name","value","type","check","closest","checkValidity","validationMessage","resetForm","newValues","newErrors","newIsValid"],"sources":["C:/Users/ASUS/dev/diplom/movies-explorer-frontend/src/hooks/useFormValidation.js"],"sourcesContent":["import React, { useCallback } from \"react\";\r\n\r\nexport const useFormWithValidation = (v = {}) => {\r\n  const [values, setValues] = React.useState(v);\r\n  const [errors, setErrors] = React.useState({});\r\n  const [isValid, setIsValid] = React.useState(false);\r\n\r\n  const validateEmail = (email) => {\r\n    const re = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return re.test(String(email).toLowerCase());\r\n  };\r\n\r\n  const handleChange = (event) => {\r\n    const target = event.target;\r\n    const name = target.name;\r\n    const value = target.value;\r\n\r\n    setValues({...values, [name]: value});\r\n\r\n    if (target.type === \"email\") {\r\n      const check = validateEmail(value);\r\n      setErrors({...errors, [name]: !check ? \"Некорректный email\" : \"\" });\r\n      setIsValid(check && target.closest(\"form\").checkValidity());\r\n    } else {\r\n      setErrors({...errors, [name]: target.validationMessage });\r\n      setIsValid(target.closest(\"form\").checkValidity());\r\n    }\r\n  };\r\n\r\n  const resetForm = useCallback(\r\n    (newValues = {}, newErrors = {}, newIsValid = false) => {\r\n      setValues(newValues);\r\n      setErrors(newErrors);\r\n      setIsValid(newIsValid);\r\n    },\r\n    [setValues, setErrors, setIsValid]\r\n  );\r\n\r\n  return { values, handleChange, errors, isValid, resetForm };\r\n};"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,WAAW,QAAQ,OAAO;AAE1C,OAAO,MAAMC,qBAAqB,GAAG,SAAAA,CAAA,EAAY;EAAAC,EAAA;EAAA,IAAXC,CAAC,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;EAC1C,MAAM,CAACG,MAAM,EAAEC,SAAS,CAAC,GAAGT,KAAK,CAACU,QAAQ,CAACN,CAAC,CAAC;EAC7C,MAAM,CAACO,MAAM,EAAEC,SAAS,CAAC,GAAGZ,KAAK,CAACU,QAAQ,CAAC,CAAC,CAAC,CAAC;EAC9C,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGd,KAAK,CAACU,QAAQ,CAAC,KAAK,CAAC;EAEnD,MAAMK,aAAa,GAAIC,KAAK,IAAK;IAC/B,MAAMC,EAAE,GAAG,uJAAuJ;IAClK,OAAOA,EAAE,CAACC,IAAI,CAACC,MAAM,CAACH,KAAK,CAAC,CAACI,WAAW,EAAE,CAAC;EAC7C,CAAC;EAED,MAAMC,YAAY,GAAIC,KAAK,IAAK;IAC9B,MAAMC,MAAM,GAAGD,KAAK,CAACC,MAAM;IAC3B,MAAMC,IAAI,GAAGD,MAAM,CAACC,IAAI;IACxB,MAAMC,KAAK,GAAGF,MAAM,CAACE,KAAK;IAE1BhB,SAAS,CAAC;MAAC,GAAGD,MAAM;MAAE,CAACgB,IAAI,GAAGC;IAAK,CAAC,CAAC;IAErC,IAAIF,MAAM,CAACG,IAAI,KAAK,OAAO,EAAE;MAC3B,MAAMC,KAAK,GAAGZ,aAAa,CAACU,KAAK,CAAC;MAClCb,SAAS,CAAC;QAAC,GAAGD,MAAM;QAAE,CAACa,IAAI,GAAG,CAACG,KAAK,GAAG,oBAAoB,GAAG;MAAG,CAAC,CAAC;MACnEb,UAAU,CAACa,KAAK,IAAIJ,MAAM,CAACK,OAAO,CAAC,MAAM,CAAC,CAACC,aAAa,EAAE,CAAC;IAC7D,CAAC,MAAM;MACLjB,SAAS,CAAC;QAAC,GAAGD,MAAM;QAAE,CAACa,IAAI,GAAGD,MAAM,CAACO;MAAkB,CAAC,CAAC;MACzDhB,UAAU,CAACS,MAAM,CAACK,OAAO,CAAC,MAAM,CAAC,CAACC,aAAa,EAAE,CAAC;IACpD;EACF,CAAC;EAED,MAAME,SAAS,GAAG9B,WAAW,CAC3B,YAAwD;IAAA,IAAvD+B,SAAS,GAAA3B,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAAA,IAAE4B,SAAS,GAAA5B,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAAA,IAAE6B,UAAU,GAAA7B,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IACjDI,SAAS,CAACuB,SAAS,CAAC;IACpBpB,SAAS,CAACqB,SAAS,CAAC;IACpBnB,UAAU,CAACoB,UAAU,CAAC;EACxB,CAAC,EACD,CAACzB,SAAS,EAAEG,SAAS,EAAEE,UAAU,CAAC,CACnC;EAED,OAAO;IAAEN,MAAM;IAAEa,YAAY;IAAEV,MAAM;IAAEE,OAAO;IAAEkB;EAAU,CAAC;AAC7D,CAAC;AAAC5B,EAAA,CArCWD,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}