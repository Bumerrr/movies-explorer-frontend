{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\dev\\\\diplom\\\\movies-explorer-frontend\\\\src\\\\components\\\\SavedMovies\\\\SavedMovies.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport Header from \"../Header/Header\";\nimport SearchForm from \"../../components/SearchForm/SearchForm\";\nimport MoviesCardList from \"../../components/MoviesCardList/MoviesCardList\";\nimport Footer from \"../../components/Footer/Footer\";\nimport { SHORT_MAX_LENGTH } from \"../../utils/constants\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SavedMovies = _ref => {\n  _s();\n  let {\n    onDeleteMovie,\n    myMovies,\n    setMyMovies,\n    getMyMovies\n  } = _ref;\n  const [search, _setSearch] = useState(localStorage.getItem(\"myMoviesSearch\") || \"\");\n  const [toggle, _setToggle] = useState(localStorage.getItem(\"myMoviesToggle\") === \"true\" || false);\n  const [filteredMovies, setFilteredMovies] = useState([]);\n  const [busy, setBusy] = useState(false);\n  const setSearch = text => {\n    localStorage.setItem(\"myMoviesSearch\", text);\n    _setSearch(text);\n  };\n  const setToggle = () => {\n    _setToggle(b => {\n      localStorage.setItem(\"myMoviesToggle\", !b);\n      return !b;\n    });\n  };\n  useEffect(() => {\n    if (myMovies) {\n      const tmp = search !== \"\" ? myMovies.filter(item => {\n        return item.nameRU.toLowerCase().includes(search.toLowerCase()) && (toggle ? item.duration <= SHORT_MAX_LENGTH : true);\n      }) : myMovies;\n      setFilteredMovies(tmp.map(item => {\n        return {\n          ...item,\n          ...{\n            isLiked: true\n          }\n        };\n      }));\n    } else {\n      setBusy(true);\n      getMyMovies().then(res => {\n        setMyMovies(res);\n      });\n    }\n  }, [search, toggle, myMovies, setMyMovies, getMyMovies]);\n  useEffect(() => {\n    setBusy(false);\n  }, [filteredMovies]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SearchForm, {\n      text: search,\n      setText: setSearch,\n      toggle: toggle,\n      setToggle: setToggle,\n      busy: busy\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MoviesCardList, {\n      movies: filteredMovies,\n      busy: busy,\n      onUnlikeMovie: onDeleteMovie\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(SavedMovies, \"zW7Um6xRVPmYhNq2V6W0+15VCvw=\");\n_c = SavedMovies;\nexport default SavedMovies;\nvar _c;\n$RefreshReg$(_c, \"SavedMovies\");","map":{"version":3,"names":["React","useState","useEffect","Header","SearchForm","MoviesCardList","Footer","SHORT_MAX_LENGTH","jsxDEV","_jsxDEV","Fragment","_Fragment","SavedMovies","_ref","_s","onDeleteMovie","myMovies","setMyMovies","getMyMovies","search","_setSearch","localStorage","getItem","toggle","_setToggle","filteredMovies","setFilteredMovies","busy","setBusy","setSearch","text","setItem","setToggle","b","tmp","filter","item","nameRU","toLowerCase","includes","duration","map","isLiked","then","res","children","fileName","_jsxFileName","lineNumber","columnNumber","setText","movies","onUnlikeMovie","_c","$RefreshReg$"],"sources":["C:/Users/ASUS/dev/diplom/movies-explorer-frontend/src/components/SavedMovies/SavedMovies.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Header from \"../Header/Header\";\r\nimport SearchForm from \"../../components/SearchForm/SearchForm\";\r\nimport MoviesCardList from \"../../components/MoviesCardList/MoviesCardList\";\r\nimport Footer from \"../../components/Footer/Footer\";\r\nimport { SHORT_MAX_LENGTH } from \"../../utils/constants\";\r\n\r\nconst SavedMovies = ({ onDeleteMovie, myMovies, setMyMovies, getMyMovies }) => {\r\n  const [search, _setSearch] = useState(\r\n    localStorage.getItem(\"myMoviesSearch\") || \"\"\r\n  );\r\n  const [toggle, _setToggle] = useState(\r\n    localStorage.getItem(\"myMoviesToggle\") === \"true\" || false\r\n  );\r\n  const [filteredMovies, setFilteredMovies] = useState([]);\r\n  const [busy, setBusy] = useState(false);\r\n\r\n  const setSearch = (text) => {\r\n    localStorage.setItem(\"myMoviesSearch\", text);\r\n    _setSearch(text);\r\n  };\r\n\r\n  const setToggle = () => {\r\n    _setToggle((b) => {\r\n      localStorage.setItem(\"myMoviesToggle\", !b);\r\n      return !b;\r\n    });\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (myMovies) {\r\n      const tmp =\r\n        search !== \"\"\r\n          ? myMovies.filter((item) => {\r\n              return (\r\n                item.nameRU.toLowerCase().includes(search.toLowerCase()) &&\r\n                (toggle ? item.duration <= SHORT_MAX_LENGTH : true)\r\n              );\r\n            })\r\n          : myMovies;\r\n\r\n      setFilteredMovies(\r\n        tmp.map((item) => {\r\n          return {\r\n            ...item,\r\n            ...{ isLiked: true },\r\n          };\r\n        })\r\n      );\r\n    } else {\r\n      setBusy(true);\r\n\r\n      getMyMovies().then((res) => {\r\n        setMyMovies(res);\r\n      });\r\n    }\r\n  }, [search, toggle, myMovies, setMyMovies, getMyMovies]);\r\n\r\n  useEffect(() => {\r\n    setBusy(false);\r\n  }, [filteredMovies]);\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <SearchForm\r\n        text={search}\r\n        setText={setSearch}\r\n        toggle={toggle}\r\n        setToggle={setToggle}\r\n        busy={busy}\r\n      />\r\n      <MoviesCardList\r\n        movies={filteredMovies}\r\n        busy={busy}\r\n        onUnlikeMovie={onDeleteMovie}\r\n      />\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SavedMovies;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}