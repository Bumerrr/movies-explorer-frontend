{"ast":null,"code":"class AuthApi {\n  constructor(baseUrl) {\n    this._baseUrl = baseUrl;\n  }\n  _handleResponse(result) {\n    if (result.ok) {\n      return result.json();\n    } else {\n      return Promise.reject(`Ошибка: ${result.status}`);\n    }\n  }\n  loginUser(email, password) {\n    return fetch(`${this._baseUrl}/signin`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => this._handleResponse(res)).then(data => {\n      localStorage.setItem('jwt', data.token);\n      return data;\n    });\n  }\n  registerUser(email, password) {\n    return fetch(`${this._baseUrl}/signup`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => this._handleResponse(res));\n  }\n  checkToken() {\n    const token = localStorage.getItem('jwt');\n    return fetch(`${this._baseUrl}/users/me`, {\n      method: 'GET',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': `Bearer ${token}`\n      }\n    }).then(res => this._handleResponse(res));\n  }\n}\nconst authApi = new AuthApi('https://api.bizit.nomoredomains.rocks');\nexport default authApi;","map":{"version":3,"names":["AuthApi","constructor","baseUrl","_baseUrl","_handleResponse","result","ok","json","Promise","reject","status","loginUser","email","password","fetch","method","headers","body","JSON","stringify","then","res","data","localStorage","setItem","token","registerUser","checkToken","getItem","authApi"],"sources":["C:/Users/ASUS/dev/diplom/movies-explorer-frontend/src/utils/authApi.js"],"sourcesContent":["class AuthApi {\r\n  constructor(baseUrl) {\r\n    this._baseUrl = baseUrl;\r\n  }\r\n\r\n  _handleResponse(result) {\r\n    if (result.ok) {\r\n      return result.json();\r\n    } else {\r\n      return Promise.reject(`Ошибка: ${result.status}`);\r\n    }\r\n  }\r\n\r\n  loginUser(email, password) {\r\n    return fetch(`${this._baseUrl}/signin`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n    .then(res => this._handleResponse(res))\r\n    .then((data) => {\r\n      localStorage.setItem('jwt', data.token)\r\n      return data;\r\n    })\r\n  }\r\n\r\n  registerUser(email, password) {\r\n    return fetch(`${this._baseUrl}/signup`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify({ email, password })\r\n    })\r\n      .then(res => this._handleResponse(res));\r\n  }\r\n\r\n  checkToken() {\r\n    const token = localStorage.getItem('jwt');\r\n    return fetch(`${this._baseUrl}/users/me`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Accept': 'application/json',\r\n        'Content-Type': 'application/json',\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    })\r\n      .then(res => this._handleResponse(res));\r\n  }\r\n\r\n}\r\n\r\nconst authApi = new AuthApi('https://api.bizit.nomoredomains.rocks');\r\n\r\nexport default authApi;\r\n"],"mappings":"AAAA,MAAMA,OAAO,CAAC;EACZC,WAAWA,CAACC,OAAO,EAAE;IACnB,IAAI,CAACC,QAAQ,GAAGD,OAAO;EACzB;EAEAE,eAAeA,CAACC,MAAM,EAAE;IACtB,IAAIA,MAAM,CAACC,EAAE,EAAE;MACb,OAAOD,MAAM,CAACE,IAAI,EAAE;IACtB,CAAC,MAAM;MACL,OAAOC,OAAO,CAACC,MAAM,CAAE,WAAUJ,MAAM,CAACK,MAAO,EAAC,CAAC;IACnD;EACF;EAEAC,SAASA,CAACC,KAAK,EAAEC,QAAQ,EAAE;IACzB,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACX,QAAS,SAAQ,EAAE;MACtCY,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,QAAQ,EAAE,kBAAkB;QAC5B,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEP,KAAK;QAAEC;MAAS,CAAC;IAC1C,CAAC,CAAC,CACDO,IAAI,CAACC,GAAG,IAAI,IAAI,CAACjB,eAAe,CAACiB,GAAG,CAAC,CAAC,CACtCD,IAAI,CAAEE,IAAI,IAAK;MACdC,YAAY,CAACC,OAAO,CAAC,KAAK,EAAEF,IAAI,CAACG,KAAK,CAAC;MACvC,OAAOH,IAAI;IACb,CAAC,CAAC;EACJ;EAEAI,YAAYA,CAACd,KAAK,EAAEC,QAAQ,EAAE;IAC5B,OAAOC,KAAK,CAAE,GAAE,IAAI,CAACX,QAAS,SAAQ,EAAE;MACtCY,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,QAAQ,EAAE,kBAAkB;QAC5B,cAAc,EAAE;MAClB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEP,KAAK;QAAEC;MAAS,CAAC;IAC1C,CAAC,CAAC,CACCO,IAAI,CAACC,GAAG,IAAI,IAAI,CAACjB,eAAe,CAACiB,GAAG,CAAC,CAAC;EAC3C;EAEAM,UAAUA,CAAA,EAAG;IACX,MAAMF,KAAK,GAAGF,YAAY,CAACK,OAAO,CAAC,KAAK,CAAC;IACzC,OAAOd,KAAK,CAAE,GAAE,IAAI,CAACX,QAAS,WAAU,EAAE;MACxCY,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACP,QAAQ,EAAE,kBAAkB;QAC5B,cAAc,EAAE,kBAAkB;QAClC,eAAe,EAAG,UAASS,KAAM;MACnC;IACF,CAAC,CAAC,CACCL,IAAI,CAACC,GAAG,IAAI,IAAI,CAACjB,eAAe,CAACiB,GAAG,CAAC,CAAC;EAC3C;AAEF;AAEA,MAAMQ,OAAO,GAAG,IAAI7B,OAAO,CAAC,uCAAuC,CAAC;AAEpE,eAAe6B,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}